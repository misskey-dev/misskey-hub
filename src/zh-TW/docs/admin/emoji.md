# 管理自訂表情符號

管理員或審查員可以透過前往實例設置，然後前往自訂表情符號子選單來管理自訂表情符號。
預設情況下，您將看到目前本機安裝的表情符號清單。
最初此列表沒有任何東西，但您可以透過不同的方式添加自訂表情符號。

## 從另一個實例複製表情符號

表情符號可以輕鬆地從另一個實例複製。
為此，請切換到自訂表情符號設定中的「遠端」標籤。
您可以按名稱和/或主機來搜尋表情符號。

當您找到所需的表情符號後，按一下它以開啟一個小選單，可以匯入表情符號。

請注意，表情符號可能受版權保護，您有責任檢查您是否可以合法使用其他表情符號。

## 單獨的表情符號導入

如果您有一個圖像檔案想要轉換為自訂表情符號，您可以將該圖像匯入為表情符號。
這就像將檔案附加到貼文一樣：
您可以選擇上傳新檔案、從 Misskey 雲端硬碟選擇檔案或從其他 URL 上傳檔案。

::: danger
當您從雲端硬碟匯入表情符號時，該檔案將保留在你的雲端硬碟中。
Misskey 不會複製該檔案，因此如果刪除它，表情符號將會損壞。
:::

表情符號將被添加到實例中，然後您就可以像往常一樣編輯或刪除它。

## 批次導入表情符號

表情符號可以作為特殊格式的打包 ZIP 檔案批次匯入。
此功能可以在自訂表情符號選單右上角的三點選單中找到。

::: warning
批次表情符號匯入可能會覆寫現有的表情符號或以其他方式弄亂您的實例。
請務必僅從可信來源匯入表情符號，最好是您自己匯出的表情符號。
:::

### 打包的表情符號格式

頂層是一個名為 `meta.json` 的文件，其中包含有關打包文件中表情符號的資訊。
該文件的類型定義如下所示，其中 `Meta` 是整個文件的結構。

```typescript
class Meta {
	metaVersion: number;
	host: string;
	/**
	 * Date and time representation returned by ECMAScript `Date.prototype.toString`.
	 */
	exportedAt: string;
	emojis: Emoji[];
}

class Emoji {
	downloaded: boolean;
	fileName: string;
	emoji: {
		id: string;
		updatedAt: string;
		name: string;
		host: null;
		category: string;
		originalUrl: string;
		publicUrl: string;
		uri: null;
		type: string;
		aliases: string[];
	};
}
```

匯入表情符號時，目前不使用或檢查 `Meta` 欄位， `emojis` 欄位除外。

每一個 `Emoji`:
- `downloaded`: 應該永遠是 `true` 。如果該欄位缺失或 `false` ，則不會匯入表情符號。
- `fileName`: 打包文件內圖像文件的名稱。
- `emoji`: 與儲存在資料庫中的表情符號相關的資料。目前，大多數這些字段甚至沒有被檢查是否存在。目前使用的有以下幾種：
  - `name`: 自訂表情符號的名稱，例如 `blobfox`。如果使用者輸入 `:blobfox:` 就會轉換為表情符號。
    如果之前存在同名表情符號，它**將被覆蓋**！
  - `category`: 表情符號的類別
  - `aliases`: 應添加為別名的字串清單。管理 UI 將這些稱為「標籤」。

## 編輯和刪除表情符號

可以透過在本機表情符號清單中點選該表情符號來編輯該表情符號的屬性。
當您按一下自訂表情符號時，將會開啟一個用於編輯屬性的對話方塊。
此對話方塊還允許您刪除表情符號。

::: danger
當您刪除自訂表情符號時，包含該表情符號的舊筆記中仍將包含該表情符號的文字名稱。
表情符號將不再正確呈現。
:::

請注意，遠端表情符號無法編輯或刪除。

每個表情符號可以有一個名稱、一個類別和多個標籤。
此類別用於建立表情符號選擇器。
同時，標籤可以用作備用名稱，在表情符號選擇器中搜尋時可以透過這些名稱找到表情符號。

完成編輯後，透過點擊對話框右上角的複選標記來儲存變更。

### 批次編輯

可以透過選取搜尋欄位下方的方塊來批次編輯表情符號。
啟用此功能後，按一下表情符號將選擇它，而不是開啟編輯對話方塊。

編輯選項將顯示為複選框下方的按鈕。
若要恢復正常行為，只需再次取消選取該方塊即可。
