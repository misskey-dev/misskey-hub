import{_ as a,o as e,c as n,e as s}from"./app.288dd8b3.js";const i={},l=s(`<h1 id="panduan-pemasangan-dan-penyetelan-misskey" tabindex="-1"><a class="header-anchor" href="#panduan-pemasangan-dan-penyetelan-misskey" aria-hidden="true">#</a> Panduan Pemasangan dan Penyetelan Misskey</h1><p>Kami sangat berterima kasih atas ketertarikanmu untuk memasang peladen Misskey kamu sendiri! Panduan ini akan menjelaskan bagaimana cara memasang dan menyetel peladen Misskey.</p><hr><div class="custom-container danger"><i class="fas fa-times"></i><p>Jangan pernah mengubah nama domain (hostname) peladen ketika kamu sudah mulai menggunakannya!</p></div><h2 id="_1-pasang-aplikasi-yang-dibutuhkan" tabindex="-1"><a class="header-anchor" href="#_1-pasang-aplikasi-yang-dibutuhkan" aria-hidden="true">#</a> <em>1.</em> Pasang aplikasi yang dibutuhkan</h2><p>Mohon pasang dan setel aplikasi berikut:</p><h4 id="aplikasi" tabindex="-1"><a class="header-anchor" href="#aplikasi" aria-hidden="true">#</a> Aplikasi \u{1F4E6}</h4><ul><li><strong><a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js</a></strong> (20.4.x)</li><li><strong><a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL</a></strong> (15.x)</li><li><strong><a href="https://redis.io/" target="_blank" rel="noopener noreferrer">Redis</a></strong></li><li><strong><a href="https://www.ffmpeg.org/" target="_blank" rel="noopener noreferrer">FFmpeg</a></strong></li></ul><p>Jika kamu menggunakan Debian/Ubuntu, kamu harus memasang paket <code>build-essential</code>.</p><p>corepack harus dinyalakan.</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> corepack <span class="token builtin class-name">enable</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_2-buat-pengguna-misskey" tabindex="-1"><a class="header-anchor" href="#_2-buat-pengguna-misskey" aria-hidden="true">#</a> <em>2.</em> Buat pengguna Misskey</h2><p>Menjalankan Misskey sebagai root bukanlah ide yang bagus. Oleh karena itu, kita akan membuat pengguna baru untuk menangani masalah tersebut. Sebagai contoh dalam debian:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>adduser --disabled-password --disabled-login misskey
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-pasang-misskey" tabindex="-1"><a class="header-anchor" href="#_3-pasang-misskey" aria-hidden="true">#</a> <em>3.</em> Pasang Misskey</h2><ol><li><p>Hubungkan ke pengguna <code>misskey</code></p><p><code>sudo -iu misskey</code></p></li><li><p>Klon repositori Misskey</p><p><code>git clone --recursive https://github.com/misskey-dev/misskey.git</code></p></li><li><p>Beralih ke direktori repositori</p><p><code>cd misskey</code></p></li><li><p>Checkout ke branch <a href="https://github.com/misskey-dev/misskey/releases/latest" target="_blank" rel="noopener noreferrer">rilisan terbaru</a></p><p><code>git checkout master</code></p></li><li><p>Unduh submodul</p><p><code>git submodule update --init</code></p></li><li><p>Pasang dependensi Misskey</p><p><code>pnpm install --frozen-lockfile</code></p></li></ol><h2 id="_4-konfigurasikan-misskey" tabindex="-1"><a class="header-anchor" href="#_4-konfigurasikan-misskey" aria-hidden="true">#</a> <em>4.</em> Konfigurasikan Misskey</h2><ol><li><p>Salin berkas <code>.config/example.yml</code> dan ubah namanya ke <code>default.yml</code>.</p><p><code>cp .config/example.yml .config/default.yml</code></p></li><li><p>Sunting <code>default.yml</code></p></li></ol><h2 id="_5-bangun-misskey" tabindex="-1"><a class="header-anchor" href="#_5-bangun-misskey" aria-hidden="true">#</a> <em>5.</em> Bangun Misskey</h2><p>Bangun Misskey dengan perintah berikut:</p><p><code>NODE_ENV=production pnpm run build</code></p><p>Apabila kamu menggunakan distribusi Debian, kamu perlu memasang paket <code>build-essential</code> dan <code>python</code>.</p><h2 id="_6-inisialisasi-basis-data" tabindex="-1"><a class="header-anchor" href="#_6-inisialisasi-basis-data" aria-hidden="true">#</a> <em>6.</em> Inisialisasi Basis Data</h2><ol><li><p>Buat pengguna PostgreSQL yang sesuai dengan kata sandi masing-masing dan basis data kosong sesuai dengan nama pada berkas konfigurasi. Pastikan koneksi basis data juga bekerja dengan benar apabila dijalankan dari pengguna yang nantinya akan menjalankan Misskey. Jika tidak, nantinya akan menyebabkan masalah. Encoding basis data harus UTF-8.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo -u postgres psql
create database misskey with encoding = &#39;UTF8&#39;;
create user misskey with encrypted password &#39;{KATA_SANDI_KAMU}&#39;;
grant all privileges on database misskey to misskey;
alter database misskey owner to misskey;
\\q
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Jalankan inisialisasi basis data <code>pnpm run init</code></p></li></ol><h2 id="_7-udah-gitu-aja" tabindex="-1"><a class="header-anchor" href="#_7-udah-gitu-aja" aria-hidden="true">#</a> <em>7.</em> Udah, gitu aja.</h2><p>Mantab! Sekarang, kamu sudah punya lingkungan yang menjalankan Misskey.</p><h3 id="menjalankan-secara-normal" tabindex="-1"><a class="header-anchor" href="#menjalankan-secara-normal" aria-hidden="true">#</a> Menjalankan secara normal</h3><p>Hanya jalankan perintah <code>NODE_ENV=production pnpm run start</code>. Selesai!</p><h3 id="menjalankan-dengan-systemd" tabindex="-1"><a class="header-anchor" href="#menjalankan-dengan-systemd" aria-hidden="true">#</a> Menjalankan dengan systemd</h3><ol><li><p>Buat layanan systemd di sini</p><p><code>/etc/systemd/system/misskey.service</code></p></li><li><p>Sunting, tempelkan konfigurasi berikut dan simpan:</p><details class="custom-container details"><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[Unit]
Description=Misskey daemon

[Service]
Type=simple
User=misskey
ExecStart=/usr/bin/npm start
WorkingDirectory=/home/misskey/misskey
Environment=&quot;NODE_ENV=production&quot;
TimeoutSec=60
StandardOutput=journal
StandardError=journal
SyslogIdentifier=misskey
Restart=always

[Install]
WantedBy=multi-user.target
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details></li><li><p>Nyalakan ulang systemd dan nyalakan layanan misskey.</p><p><code>sudo systemctl daemon-reload; sudo systemctl enable misskey</code></p></li><li><p>Jalankan layanan misskey.</p><p><code>sudo systemctl start misskey</code></p></li></ol><p>Kamu dapat mengecek apakah layanannya berjalan dengan memasukkan perintah <code>systemctl status misskey</code>.</p><h3 id="jalankan-dengan-openrc" tabindex="-1"><a class="header-anchor" href="#jalankan-dengan-openrc" aria-hidden="true">#</a> Jalankan dengan OpenRC</h3><ol><li><p>Salin teks berikut ke <code>/etc/init.d/misskey</code>:</p><details class="custom-container details"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/sbin/openrc-run</span>

<span class="token assign-left variable">name</span><span class="token operator">=</span>misskey
<span class="token assign-left variable">description</span><span class="token operator">=</span><span class="token string">&quot;Misskey daemon&quot;</span>

<span class="token assign-left variable">command</span><span class="token operator">=</span><span class="token string">&quot;/usr/bin/npm&quot;</span>
<span class="token assign-left variable">command_args</span><span class="token operator">=</span><span class="token string">&quot;start&quot;</span>
<span class="token assign-left variable">command_user</span><span class="token operator">=</span><span class="token string">&quot;misskey&quot;</span>

<span class="token assign-left variable">supervisor</span><span class="token operator">=</span><span class="token string">&quot;supervise-daemon&quot;</span>
<span class="token assign-left variable">supervise_daemon_args</span><span class="token operator">=</span><span class="token string">&quot; -d /home/misskey/misskey -e NODE_ENV=<span class="token entity" title="\\&quot;">\\&quot;</span>production<span class="token entity" title="\\&quot;">\\&quot;</span>&quot;</span>

<span class="token assign-left variable">pidfile</span><span class="token operator">=</span><span class="token string">&quot;/run/<span class="token variable">\${RC_SVCNAME}</span>.pid&quot;</span>

<span class="token function-name function">depend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	need net
	use logger

	<span class="token comment"># alternatively, uncomment if using nginx reverse proxy</span>
	<span class="token comment">#use logger nginx</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details></li><li><p>Atur layanan untuk mulai pada saat boot</p><p><code>rc-update add misskey</code></p></li><li><p>Jalankan layanan misskey</p><p><code>rc-service misskey start</code></p></li></ol><p>Kamu dapat mengecek apakah layanannya berjalan dengan memasukkan perintah <code>rc-service misskey status</code>.</p><h3 id="bagaimana-cara-memutakhirkan-peladen-misskey-ke-versi-terbaru" tabindex="-1"><a class="header-anchor" href="#bagaimana-cara-memutakhirkan-peladen-misskey-ke-versi-terbaru" aria-hidden="true">#</a> Bagaimana cara memutakhirkan peladen Misskey ke versi terbaru</h3><ol><li><code>git checkout master</code></li><li><code>git pull</code></li><li><code>git submodule update --init</code></li><li><code>NODE_ENV=production pnpm install --frozen-lockfile</code></li><li><code>NODE_ENV=production pnpm run build</code></li><li><code>pnpm run migrate</code></li><li>Restart your Misskey process to apply changes</li><li>Enjoy</li></ol><p>Apabila kamu menemukan masalah pada saat memutakhirkan, coba jalankan perintah berikut:</p><ol><li><code>pnpm run clean</code> atau <code>pnpm run clean-all</code></li><li>Coba mutakhirkan lagi (Jangan lupa <code>pnpm install</code>)</li></ol>`,38),d=[l];function t(r,o){return e(),n("div",null,d)}var c=a(i,[["render",t],["__file","manual.html.vue"]]);export{c as default};
