import{_ as s,o as n,c as a,e}from"./app.0e282d90.js";const i={},t=e(`<h1 id="misskey\u69CB\u7BC9\u306E\u624B\u5F15\u304D" tabindex="-1"><a class="header-anchor" href="#misskey\u69CB\u7BC9\u306E\u624B\u5F15\u304D" aria-hidden="true">#</a> Misskey\u69CB\u7BC9\u306E\u624B\u5F15\u304D</h1><p>\u3053\u306E\u30AC\u30A4\u30C9\u3067\u306FMisskey\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u30FB\u30BB\u30C3\u30C8\u30A2\u30C3\u30D7\u65B9\u6CD5\u306B\u3064\u3044\u3066\u89E3\u8AAC\u3057\u307E\u3059\u3002</p><div class="custom-container danger"><i class="fas fa-times"></i><p>\u4E00\u5EA6\u4F7F\u7528\u3092\u59CB\u3081\u305F\u30B5\u30FC\u30D0\u30FC\u306E\u30C9\u30E1\u30A4\u30F3\u30FB\u30DB\u30B9\u30C8\u540D\u3067\u306F\u3001\u30C7\u30FC\u30BF\u30D9\u30FC\u30B9\u3092\u4F5C\u308A\u76F4\u3055\u306A\u3044\u3067\u304F\u3060\u3055\u3044\uFF01</p></div><div class="custom-container tip"><i class="fas fa-info"></i><p class="custom-container-title">\u524D\u63D0\u6761\u4EF6</p><p>\u4EE5\u4E0B\u306E\u30BD\u30D5\u30C8\u30A6\u30A7\u30A2\u304C\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u30FB\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u308B\u3053\u3068</p><ul><li><strong><a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node.js</a></strong> (20.4.x\u4EE5\u4E0A)</li><li><strong><a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL</a></strong> (15\u4EE5\u4E0A)</li><li><strong><a href="https://redis.io/" target="_blank" rel="noopener noreferrer">Redis</a></strong></li><li><strong><a href="https://www.ffmpeg.org/" target="_blank" rel="noopener noreferrer">FFmpeg</a></strong></li></ul><p>Debian/Ubuntu\u3092\u304A\u4F7F\u3044\u3067\u3042\u308C\u3070\u3001<code>build-essential</code>\u30D1\u30C3\u30B1\u30FC\u30B8\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3057\u3066\u304A\u304F\u3068\u826F\u3044\u3067\u3059\u3002</p><p>corepack\u304C\u6709\u52B9\u5316\u3055\u308C\u3066\u3044\u308B\u3053\u3068</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> corepack <span class="token builtin class-name">enable</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></div><h2 id="\u30E6\u30FC\u30B5\u3099\u30FC\u306E\u4F5C\u6210" tabindex="-1"><a class="header-anchor" href="#\u30E6\u30FC\u30B5\u3099\u30FC\u306E\u4F5C\u6210" aria-hidden="true">#</a> \u30E6\u30FC\u30B6\u30FC\u306E\u4F5C\u6210</h2><p>Misskey\u306Froot\u30E6\u30FC\u30B6\u30FC\u3067\u5B9F\u884C\u3057\u306A\u3044\u65B9\u304C\u3088\u3044\u305F\u3081\u3001\u4EE3\u308F\u308A\u306B\u30E6\u30FC\u30B6\u30FC\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002 Debian\u306E\u4F8B:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>adduser --disabled-password --disabled-login misskey
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="misskey\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB" tabindex="-1"><a class="header-anchor" href="#misskey\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB" aria-hidden="true">#</a> Misskey\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> -iu misskey
<span class="token function">git</span> clone --recursive https://github.com/misskey-dev/misskey.git
<span class="token builtin class-name">cd</span> misskey
<span class="token function">git</span> checkout master
<span class="token function">git</span> submodule update --init
<span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production <span class="token function">pnpm</span> <span class="token function">install</span> --frozen-lockfile
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u8A2D\u5B9A" tabindex="-1"><a class="header-anchor" href="#\u8A2D\u5B9A" aria-hidden="true">#</a> \u8A2D\u5B9A</h2><p>\u8A2D\u5B9A\u30B5\u30F3\u30D7\u30EB\u306E<code>.config/example.yml</code>\u3092\u30B3\u30D4\u30FC\u3057\u3001<code>default.yml</code>\u306B\u30EA\u30CD\u30FC\u30E0\u3057\u307E\u3059\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cp</span> .config/example.yml .config/default.yml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>default.yml</code> \u3092\u30D5\u30A1\u30A4\u30EB\u5185\u306E\u6307\u793A\u306B\u5F93\u3063\u3066\u7DE8\u96C6\u3057\u307E\u3059\u3002</p><h2 id="\u30D2\u3099\u30EB\u30C8\u3099\u3068\u521D\u671F\u5316" tabindex="-1"><a class="header-anchor" href="#\u30D2\u3099\u30EB\u30C8\u3099\u3068\u521D\u671F\u5316" aria-hidden="true">#</a> \u30D3\u30EB\u30C9\u3068\u521D\u671F\u5316</h2><p>\u6B21\u306E\u30B3\u30DE\u30F3\u30C9\u3067Misskey\u306E\u30D3\u30EB\u30C9\u3068\u30C7\u30FC\u30BF\u30D9\u30FC\u30B9\u306E\u521D\u671F\u5316\u3092\u884C\u3044\u307E\u3059\u3002 \u3053\u308C\u306B\u306F\u3057\u3070\u3089\u304F\u6642\u9593\u304C\u304B\u304B\u308A\u307E\u3059\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production <span class="token function">pnpm</span> run build
<span class="token function">pnpm</span> run init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u8D77\u52D5" tabindex="-1"><a class="header-anchor" href="#\u8D77\u52D5" aria-hidden="true">#</a> \u8D77\u52D5</h2><p>\u304A\u75B2\u308C\u69D8\u3067\u3057\u305F\u3002\u4EE5\u4E0B\u306E\u30B3\u30DE\u30F3\u30C9\u3067Misskey\u3092\u8D77\u52D5\u3067\u304D\u307E\u3059\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production <span class="token function">pnpm</span> run start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>GLHF\u2728</p><details class="custom-container details"><summary>systemd\u3092\u7528\u3044\u305F\u7BA1\u7406</summary><p>systemd\u30B5\u30FC\u30D3\u30B9\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u4F5C\u6210</p><p><code>/etc/systemd/system/misskey.service</code></p><p>\u30A8\u30C7\u30A3\u30BF\u3067\u958B\u304D\u3001\u4EE5\u4E0B\u306E\u30B3\u30FC\u30C9\u3092\u8CBC\u308A\u4ED8\u3051\u3066\u4FDD\u5B58:</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">Misskey daemon</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Type</span><span class="token punctuation">=</span><span class="token value attr-value">simple</span>
<span class="token key attr-name">User</span><span class="token punctuation">=</span><span class="token value attr-value">misskey</span>
<span class="token key attr-name">ExecStart</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/bin/npm start</span>
<span class="token key attr-name">WorkingDirectory</span><span class="token punctuation">=</span><span class="token value attr-value">/home/misskey/misskey</span>
<span class="token key attr-name">Environment</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">NODE_ENV=production</span>&quot;</span>
<span class="token key attr-name">TimeoutSec</span><span class="token punctuation">=</span><span class="token value attr-value">60</span>
<span class="token key attr-name">StandardOutput</span><span class="token punctuation">=</span><span class="token value attr-value">journal</span>
<span class="token key attr-name">StandardError</span><span class="token punctuation">=</span><span class="token value attr-value">journal</span>
<span class="token key attr-name">SyslogIdentifier</span><span class="token punctuation">=</span><span class="token value attr-value">misskey</span>
<span class="token key attr-name">Restart</span><span class="token punctuation">=</span><span class="token value attr-value">always</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">WantedBy</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><i class="fas fa-exclamation"></i><p>CentOS\u30671024\u4EE5\u4E0B\u306E\u30DD\u30FC\u30C8\u3092\u4F7F\u7528\u3057\u3066Misskey\u3092\u4F7F\u7528\u3059\u308B\u5834\u5408\u306F<code>ExecStart=/usr/bin/sudo /usr/bin/npm start</code>\u306B\u5909\u66F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002</p></div><p>systemd\u3092\u518D\u8AAD\u307F\u8FBC\u307F\u3057misskey\u30B5\u30FC\u30D3\u30B9\u3092\u6709\u52B9\u5316</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> misskey
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>misskey\u30B5\u30FC\u30D3\u30B9\u306E\u8D77\u52D5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl start misskey
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container tip"><i class="fas fa-info"></i><p><code>systemctl status misskey</code>\u3068\u5165\u529B\u3059\u308B\u3068\u3001\u30B5\u30FC\u30D3\u30B9\u306E\u72B6\u614B\u3092\u8ABF\u3079\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002</p></div></details><h2 id="misskey\u306E\u30A2\u30C3\u30D5\u309A\u30C6\u3099\u30FC\u30C8\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#misskey\u306E\u30A2\u30C3\u30D5\u309A\u30C6\u3099\u30FC\u30C8\u65B9\u6CD5" aria-hidden="true">#</a> Misskey\u306E\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u65B9\u6CD5</h2><div class="custom-container warning"><i class="fas fa-exclamation"></i><p>\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u306E\u969B\u306F\u5FC5\u305A<a href="https://github.com/misskey-dev/misskey/blob/master/CHANGELOG.md" target="_blank" rel="noopener noreferrer">\u30EA\u30EA\u30FC\u30B9\u30CE\u30FC\u30C8</a>\u3092\u78BA\u8A8D\u3057\u3001\u5909\u66F4\u70B9\u3084\u8FFD\u52A0\u3067\u5FC5\u8981\u306B\u306A\u308B\u4F5C\u696D\u306E\u6709\u7121(\u307B\u3068\u3093\u3069\u306E\u5834\u5408\u3042\u308A\u307E\u305B\u3093)\u3092\u4E88\u3081\u628A\u63E1\u3059\u308B\u3088\u3046\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002</p></div><p>master\u3092pull\u3057\u76F4\u3057\u3001\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3001\u30D3\u30EB\u30C9\u3001\u30C7\u30FC\u30BF\u30D9\u30FC\u30B9\u306E\u30DE\u30A4\u30B0\u30EC\u30FC\u30B7\u30E7\u30F3\u3092\u884C\u3044\u307E\u3059:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> checkout master
<span class="token function">git</span> pull
<span class="token function">git</span> submodule update --init
<span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production <span class="token function">pnpm</span> <span class="token function">install</span> --frozen-lockfile
<span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production <span class="token function">pnpm</span> run build
<span class="token function">pnpm</span> run migrate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u5185\u5BB9\u3001\u304A\u3088\u3073\u30C7\u30FC\u30BF\u30D9\u30FC\u30B9\u306E\u898F\u6A21\u306B\u3088\u3063\u3066\u306F\u6642\u9593\u304C\u304B\u304B\u308B\u3053\u3068\u304C\u3042\u308A\u307E\u3059\u3002</p><p>\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u304C\u7D42\u308F\u308A\u6B21\u7B2C\u3001Misskey\u30D7\u30ED\u30BB\u30B9\u3092\u518D\u8D77\u52D5\u3057\u3066\u304F\u3060\u3055\u3044\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl restart misskey
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="custom-container tip"><i class="fas fa-info"></i><p>\u30D3\u30EB\u30C9\u3084\u8D77\u52D5\u6642\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u305F\u5834\u5408\u306F\u3001\u4EE5\u4E0B\u306E\u30B3\u30DE\u30F3\u30C9\u3092\u304A\u8A66\u3057\u304F\u3060\u3055\u3044:</p><ul><li><code>pnpm run clean</code>\u307E\u305F\u306F<code>pnpm run clean-all</code></li><li><code>pnpm rebuild</code></li></ul></div>`,29),l=[t];function c(o,p){return n(),a("div",null,l)}var d=s(i,[["render",c],["__file","manual.html.vue"]]);export{d as default};
