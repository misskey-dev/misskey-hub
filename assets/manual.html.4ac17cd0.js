import{r as l,o as i,c,a as s,b as e,F as p,d as n,e as t}from"./app.41b2c3dd.js";import{_ as o}from"./plugin-vue_export-helper.21dcd24c.js";const r={},u=s("h1",{id:"misskey\u69CB\u7BC9\u306E\u624B\u5F15\u304D",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#misskey\u69CB\u7BC9\u306E\u624B\u5F15\u304D","aria-hidden":"true"},"#"),n(" Misskey\u69CB\u7BC9\u306E\u624B\u5F15\u304D")],-1),d=s("p",null,"\u3053\u306E\u30AC\u30A4\u30C9\u3067\u306FMisskey\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u30FB\u30BB\u30C3\u30C8\u30A2\u30C3\u30D7\u65B9\u6CD5\u306B\u3064\u3044\u3066\u89E3\u8AAC\u3057\u307E\u3059\u3002",-1),m={class:"custom-container tip"},b=s("i",{class:"fas fa-info"},null,-1),k=s("p",{class:"custom-container-title"},"\u524D\u63D0\u6761\u4EF6",-1),h=s("p",null,"\u4EE5\u4E0B\u306E\u30BD\u30D5\u30C8\u30A6\u30A7\u30A2\u304C\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u30FB\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u308B\u3053\u3068",-1),v={href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"},g=n("Node.js"),y=n(" (16.x)"),_={href:"https://www.postgresql.org/",target:"_blank",rel:"noopener noreferrer"},f=n("PostgreSQL"),x=n(" (10\u4EE5\u4E0A)"),E={href:"https://redis.io/",target:"_blank",rel:"noopener noreferrer"},w=n("Redis"),M={href:"https://yarnpkg.com/",target:"_blank",rel:"noopener noreferrer"},N=n("Yarn"),S=n(" (v1\u7CFB)"),D={href:"https://www.ffmpeg.org/",target:"_blank",rel:"noopener noreferrer"},V=n("FFmpeg"),F=t(`<p>\u74B0\u5883\u5909\u6570\u304C\u6B21\u306E\u3088\u3046\u306B\u8A2D\u5B9A\u3055\u308C\u3066\u3044\u308B\u3053\u3068</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>production
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div>`,2),L=t(`<h2 id="\u30E6\u30FC\u30B5\u3099\u30FC\u306E\u4F5C\u6210" tabindex="-1"><a class="header-anchor" href="#\u30E6\u30FC\u30B5\u3099\u30FC\u306E\u4F5C\u6210" aria-hidden="true">#</a> \u30E6\u30FC\u30B6\u30FC\u306E\u4F5C\u6210</h2><p>Misskey\u306Froot\u30E6\u30FC\u30B6\u30FC\u3067\u5B9F\u884C\u3057\u306A\u3044\u65B9\u304C\u3088\u3044\u305F\u3081\u3001\u4EE3\u308F\u308A\u306B\u30E6\u30FC\u30B6\u30FC\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002 Debian\u306E\u4F8B:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>adduser --disabled-password --disabled-login misskey
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="misskey\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB" tabindex="-1"><a class="header-anchor" href="#misskey\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB" aria-hidden="true">#</a> Misskey\u306E\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">su</span> - misskey
<span class="token function">git</span> clone --recursive -b master https://github.com/misskey-dev/misskey.git
<span class="token function">git</span> submodule update --init
<span class="token builtin class-name">cd</span> misskey
<span class="token function">git</span> checkout master
<span class="token function">yarn</span> <span class="token function">install</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="\u8A2D\u5B9A" tabindex="-1"><a class="header-anchor" href="#\u8A2D\u5B9A" aria-hidden="true">#</a> \u8A2D\u5B9A</h2><p>\u8A2D\u5B9A\u30B5\u30F3\u30D7\u30EB\u306E<code>.config/example.yml</code>\u3092\u30B3\u30D4\u30FC\u3057\u3001<code>default.yml</code>\u306B\u30EA\u30CD\u30FC\u30E0\u3057\u307E\u3059\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">cp</span> .config/example.yml .config/default.yml
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><code>default.yml</code> \u3092\u30D5\u30A1\u30A4\u30EB\u5185\u306E\u6307\u793A\u306B\u5F93\u3063\u3066\u7DE8\u96C6\u3057\u307E\u3059\u3002</p><h2 id="\u30D2\u3099\u30EB\u30C8\u3099\u3068\u521D\u671F\u5316" tabindex="-1"><a class="header-anchor" href="#\u30D2\u3099\u30EB\u30C8\u3099\u3068\u521D\u671F\u5316" aria-hidden="true">#</a> \u30D3\u30EB\u30C9\u3068\u521D\u671F\u5316</h2><p>\u6B21\u306E\u30B3\u30DE\u30F3\u30C9\u3067Misskey\u306E\u30D3\u30EB\u30C9\u3068\u30C7\u30FC\u30BF\u30D9\u30FC\u30B9\u306E\u521D\u671F\u5316\u3092\u884C\u3044\u307E\u3059\u3002 \u3053\u308C\u306B\u306F\u3057\u3070\u3089\u304F\u6642\u9593\u304C\u304B\u304B\u308A\u307E\u3059\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> build
<span class="token function">yarn</span> run init
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-container tip"><i class="fas fa-info"></i><p>Debian\u3092\u304A\u4F7F\u3044\u3067\u3042\u308C\u3070\u3001<code>build-essential</code>\u30D1\u30C3\u30B1\u30FC\u30B8\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002</p></div><div class="custom-container tip"><i class="fas fa-info"></i><p class="custom-container-title">\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3059\u308B\u5834\u5408</p><p>\u4F55\u3089\u304B\u306E\u30E2\u30B8\u30E5\u30FC\u30EB\u3067\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3059\u308B\u5834\u5408\u306Fnode-gyp\u3092\u4F7F\u3063\u3066\u304F\u3060\u3055\u3044:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>npx node-gyp configure
npx node-gyp build
<span class="token function">yarn</span> build
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><h2 id="\u8D77\u52D5" tabindex="-1"><a class="header-anchor" href="#\u8D77\u52D5" aria-hidden="true">#</a> \u8D77\u52D5</h2><p>\u304A\u75B2\u308C\u69D8\u3067\u3057\u305F\u3002\u4EE5\u4E0B\u306E\u30B3\u30DE\u30F3\u30C9\u3067Misskey\u3092\u8D77\u52D5\u3067\u304D\u307E\u3059\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">yarn</span> start
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>GLHF\u2728</p><details class="custom-container details"><summary>systemd\u3092\u7528\u3044\u305F\u7BA1\u7406</summary><p>systemd\u30B5\u30FC\u30D3\u30B9\u306E\u30D5\u30A1\u30A4\u30EB\u3092\u4F5C\u6210</p><p><code>/etc/systemd/system/misskey.service</code></p><p>\u30A8\u30C7\u30A3\u30BF\u3067\u958B\u304D\u3001\u4EE5\u4E0B\u306E\u30B3\u30FC\u30C9\u3092\u8CBC\u308A\u4ED8\u3051\u3066\u4FDD\u5B58:</p><div class="language-ini ext-ini line-numbers-mode"><pre class="language-ini"><code><span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Unit</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Description</span><span class="token punctuation">=</span><span class="token value attr-value">Misskey daemon</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Service</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">Type</span><span class="token punctuation">=</span><span class="token value attr-value">simple</span>
<span class="token key attr-name">User</span><span class="token punctuation">=</span><span class="token value attr-value">misskey</span>
<span class="token key attr-name">ExecStart</span><span class="token punctuation">=</span><span class="token value attr-value">/usr/bin/npm start</span>
<span class="token key attr-name">WorkingDirectory</span><span class="token punctuation">=</span><span class="token value attr-value">/home/misskey/misskey</span>
<span class="token key attr-name">Environment</span><span class="token punctuation">=</span><span class="token value attr-value">&quot;<span class="token inner-value">NODE_ENV=production</span>&quot;</span>
<span class="token key attr-name">TimeoutSec</span><span class="token punctuation">=</span><span class="token value attr-value">60</span>
<span class="token key attr-name">StandardOutput</span><span class="token punctuation">=</span><span class="token value attr-value">syslog</span>
<span class="token key attr-name">StandardError</span><span class="token punctuation">=</span><span class="token value attr-value">syslog</span>
<span class="token key attr-name">SyslogIdentifier</span><span class="token punctuation">=</span><span class="token value attr-value">misskey</span>
<span class="token key attr-name">Restart</span><span class="token punctuation">=</span><span class="token value attr-value">always</span>

<span class="token header"><span class="token punctuation">[</span><span class="token section-name selector">Install</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">WantedBy</span><span class="token punctuation">=</span><span class="token value attr-value">multi-user.target</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="custom-container warning"><i class="fas fa-exclamation"></i><p>CentOS\u30671024\u4EE5\u4E0B\u306E\u30DD\u30FC\u30C8\u3092\u4F7F\u7528\u3057\u3066Misskey\u3092\u4F7F\u7528\u3059\u308B\u5834\u5408\u306F<code>ExecStart=/usr/bin/sudo /usr/bin/npm start</code>\u306B\u5909\u66F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059\u3002</p></div><p>systemd\u3092\u518D\u8AAD\u307F\u8FBC\u307F\u3057misskey\u30B5\u30FC\u30D3\u30B9\u3092\u6709\u52B9\u5316</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl daemon-reload<span class="token punctuation">;</span> systemctl <span class="token builtin class-name">enable</span> misskey
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>misskey\u30B5\u30FC\u30D3\u30B9\u306E\u8D77\u52D5</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>systemctl start misskey
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><i class="fas fa-info"></i><p><code>systemctl status misskey</code>\u3068\u5165\u529B\u3059\u308B\u3068\u3001\u30B5\u30FC\u30D3\u30B9\u306E\u72B6\u614B\u3092\u8ABF\u3079\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002</p></div></details><h2 id="misskey\u306E\u30A2\u30C3\u30D5\u309A\u30C6\u3099\u30FC\u30C8\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#misskey\u306E\u30A2\u30C3\u30D5\u309A\u30C6\u3099\u30FC\u30C8\u65B9\u6CD5" aria-hidden="true">#</a> Misskey\u306E\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u65B9\u6CD5</h2>`,20),O={class:"custom-container warning"},j=s("i",{class:"fas fa-exclamation"},null,-1),B=n("\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u306E\u969B\u306F\u5FC5\u305A"),I={href:"https://github.com/misskey-dev/misskey/blob/master/CHANGELOG.md",target:"_blank",rel:"noopener noreferrer"},q=n("\u30EA\u30EA\u30FC\u30B9\u30CE\u30FC\u30C8"),C=n("\u3092\u78BA\u8A8D\u3057\u3001\u5909\u66F4\u70B9\u3084\u8FFD\u52A0\u3067\u5FC5\u8981\u306B\u306A\u308B\u4F5C\u696D\u306E\u6709\u7121(\u307B\u3068\u3093\u3069\u306E\u5834\u5408\u3042\u308A\u307E\u305B\u3093)\u3092\u4E88\u3081\u628A\u63E1\u3059\u308B\u3088\u3046\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002"),G=t(`<p>master\u3092pull\u3057\u76F4\u3057\u3001\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3001\u30D3\u30EB\u30C9\u3001\u30C7\u30FC\u30BF\u30D9\u30FC\u30B9\u306E\u30DE\u30A4\u30B0\u30EC\u30FC\u30B7\u30E7\u30F3\u3092\u884C\u3044\u307E\u3059:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> checkout master
<span class="token function">git</span> pull
<span class="token function">git</span> submodule update --init
<span class="token function">yarn</span> <span class="token function">install</span>
<span class="token function">yarn</span> build
<span class="token function">yarn</span> migrate
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u5185\u5BB9\u3001\u304A\u3088\u3073\u30C7\u30FC\u30BF\u30D9\u30FC\u30B9\u306E\u898F\u6A21\u306B\u3088\u3063\u3066\u306F\u6642\u9593\u304C\u304B\u304B\u308B\u3053\u3068\u304C\u3042\u308A\u307E\u3059\u3002</p><p>\u30A2\u30C3\u30D7\u30C7\u30FC\u30C8\u304C\u7D42\u308F\u308A\u6B21\u7B2C\u3001Misskey\u30D7\u30ED\u30BB\u30B9\u3092\u518D\u8D77\u52D5\u3057\u3066\u304F\u3060\u3055\u3044\u3002</p><div class="custom-container tip"><i class="fas fa-info"></i><p>\u30D3\u30EB\u30C9\u3084\u8D77\u52D5\u6642\u306B\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u305F\u5834\u5408\u306F\u3001\u4EE5\u4E0B\u306E\u30B3\u30DE\u30F3\u30C9\u3092\u304A\u8A66\u3057\u304F\u3060\u3055\u3044:</p><ul><li><code>yarn clean</code>\u307E\u305F\u306F<code>yarn cleanall</code></li><li><code>npm rebuild</code></li></ul></div>`,5);function T(H,R){const a=l("ExternalLinkIcon");return i(),c(p,null,[u,d,s("div",m,[b,k,h,s("ul",null,[s("li",null,[s("strong",null,[s("a",v,[g,e(a)])]),y]),s("li",null,[s("strong",null,[s("a",_,[f,e(a)])]),x]),s("li",null,[s("strong",null,[s("a",E,[w,e(a)])])]),s("li",null,[s("strong",null,[s("a",M,[N,e(a)])]),S]),s("li",null,[s("strong",null,[s("a",D,[V,e(a)])])])]),F]),L,s("div",O,[j,s("p",null,[B,s("a",I,[q,e(a)]),C])]),G],64)}var A=o(r,[["render",T]]);export{A as default};
